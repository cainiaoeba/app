"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[832],{649:function(t,e,r){r.d(e,{Z:function(){return u}});var o=function(){var t=this,e=t._self._c;return e("div",[e("van-nav-bar",{attrs:{title:"标题","left-text":"返回","left-arrow":"",fixed:"",placeholder:""},on:{"click-left":function(e){return t.$router.back()}},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",[t._t("title")],2)]},proxy:!0}],null,!0)})],1)},s=[],a={name:"NavBar",data(){return{}}},n=a,i=r(1001),d=(0,i.Z)(n,o,s,!1,null,"48cd60bc",null),u=d.exports},2832:function(t,e,r){r.r(e),r.d(e,{default:function(){return l}});var o=function(){var t=this,e=t._self._c;return e("div",[e("NavBarVue",{scopedSlots:t._u([{key:"title",fn:function(){return[e("div",[t._v("生成订单")])]},proxy:!0}])}),e("van-contact-card",{attrs:{type:"edit",name:t.currentContact.name,tel:t.currentContact.tel},on:{click:t.onEdit}}),e("div",{staticClass:"shopCart"},t._l(t.shopCart,(function(t){return e("section",{key:t.goodsId,staticClass:"cart-box"},[e("van-card",{attrs:{num:t.goodsCount,price:t.sellingPrice,title:t.goodsName,thumb:t.goodsCoverImg}})],1)})),0),e("van-submit-bar",{attrs:{price:t.allPrice,"button-text":"生成订单"},on:{submit:t.onSubmit}}),e("van-popup",{style:{height:"24%"},attrs:{position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t._l(t.pays,(function(r,o){return e("div",{key:o,on:{click:function(e){return t.goOrder(r.name)}}},[t._v(t._s(r.name))])})),e("section"),e("div",{on:{click:t.offGoOrder}},[t._v("取消")])],2)],1)},s=[],a=(r(7658),r(649)),n=r(9547),i={name:"Order",components:{NavBarVue:a.Z},data(){return{currentContact:{name:"张三",tel:"13000000000"},shopCart:[],allPrice:Number(localStorage.getItem("allPrice")),show:!1,cartItemIds:"",addressId:this.$route.query.addressId,pays:[{name:"微信支付"},{name:"支付宝支付"}],orderNo:""}},methods:{onEdit(){this.$router.push("addressList")},onSubmit(){this.show=!0,(0,n.TR)({addressId:this.addressId,cartItemIds:this.cartItemIds.split(",")}).then((t=>{console.log("sava",t),200===t.resultCode&&(this.orderNo=t.data)}))},goOrder(t){"微信支付"==t?(0,n.lx)(this.orderNo,1).then((t=>{200==t.resultCode&&(console.log(t),this.$toast("微信支付成功"),setTimeout((()=>{this.$router.push("/order")}),500))})):"支付宝支付"==t&&(this.$toast("支付宝支付成功"),(0,n.lx)(this.orderNo,2).then((t=>{200==t.resultCode&&(console.log(t),this.$toast("支付宝支付成功"),setTimeout((()=>{this.$router.push("/order")}),500))})))},offGoOrder(){this.$router.push("/order")}},created(){this.cartItemIds=localStorage.getItem("cartItemIds"),(0,n.RH)(this.cartItemIds).then((t=>{200===t.resultCode&&(this.shopCart=t.data)})),(0,n.Yu)(this.addressId).then((t=>{200==t.resultCode&&(this.currentContact={name:t.data.userName,tel:t.data.userPhone+t.data.provinceName+t.data.cityName+t.data.regionName})}))}},d=i,u=r(1001),c=(0,u.Z)(d,o,s,!1,null,"8365b082",null),l=c.exports}}]);
//# sourceMappingURL=832.7478d363.js.map